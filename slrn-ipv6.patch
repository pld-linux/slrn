diff -Nur slrn-0.9.6.4pl4c.orig/configure.in slrn-0.9.6.4pl4c/configure.in
--- slrn-0.9.6.4pl4c.orig/configure.in	Mon Mar 19 16:41:36 2001
+++ slrn-0.9.6.4pl4c/configure.in	Fri Mar 30 04:06:20 2001
@@ -135,6 +135,27 @@
 isalpha isspace isdigit isalnum ispunct \
 )
 
+AC_MSG_CHECKING([whether to enable ipv6])
+AC_ARG_ENABLE(ipv6,
+[  --enable-ipv6           Enable ipv6 support
+  --disable-ipv6          Disable ipv6 support],
+[case "$enableval" in
+  no)   AC_MSG_RESULT(no)
+        ;;
+  *)    AC_MSG_RESULT(yes)
+        CFLAGS="$CFLAGS -DINET6"
+        ;;
+esac],
+AC_TRY_RUN([ /* PF_INET6 avalable check */
+#include <sys/types.h>
+#include <sys/socket.h>
+main(){if (socket(PF_INET6, SOCK_STREAM, 0) < 0) exit(1); else exit(0);}
+],[     AC_MSG_RESULT(yes)
+        CFLAGS="$CFLAGS -DINET6"
+],[     AC_MSG_RESULT(no)
+],[     AC_MSG_RESULT(unknown)
+]))
+
 AC_MSG_CHECKING(if sprintf has a bogus return type)
 AC_TRY_LINK([#include <stdio.h>],
 	[char buf[1]; int ret; ret = sprintf (buf, "") % 1],
diff -Nur slrn-0.9.6.4pl4c.orig/src/sltcp.c slrn-0.9.6.4pl4c/src/sltcp.c
--- slrn-0.9.6.4pl4c.orig/src/sltcp.c	Thu Mar  1 18:46:20 2001
+++ slrn-0.9.6.4pl4c/src/sltcp.c	Fri Mar 30 04:04:08 2001
@@ -171,6 +171,11 @@
  */
 static int get_tcp_socket_1 (char *host, int port) /*{{{*/
 {
+#ifdef INET6
+   struct addrinfo hints, *res0, *res;
+   int gai;
+   char servbuf[NI_MAXSERV];
+#else
    char **h_addr_list;
    /* h_addr_list is NULL terminated if h_addr is defined.  If h_addr
     * is not defined, h_addr is the only element in the list.  When
@@ -181,9 +186,22 @@
    char *fake_h_addr_list[2];
    unsigned long fake_addr;
    struct sockaddr_in s_in;
+#endif
    int s;
    int not_connected;
 
+#ifdef INET6
+   sprintf(servbuf, "%d", port);
+   memset(&hints, 0, sizeof(hints));
+   hints.ai_family = PF_UNSPEC;
+   hints.ai_socktype = SOCK_STREAM;
+   gai = getaddrinfo(host, servbuf, &hints, &res0);
+   if (gai)
+     {
+	fprintf(stderr, "%s port %s: %s\n", host, servbuf, gai_strerror(gai));
+	return -1;
+     }
+#else	/* INET6 / !INET6 */
    /* If it does not look like a numerical address, use nameserver */
    if (!isdigit(*host) || (-1L == (long)(fake_addr = inet_addr (host))))
      {
@@ -227,14 +245,48 @@
    memset ((char *) &s_in, 0, sizeof(s_in));
    s_in.sin_family = h_addr_type;
    s_in.sin_port = htons((unsigned short) port);
+#endif	/* !INET6 */
 
+   not_connected = -1;
+
+#ifdef INET6
+   for (res=res0; res; res=res->ai_next)
+     {
+	char addrbuf[NI_MAXHOST];
+	if (getnameinfo(res->ai_addr, res->ai_addrlen,
+			addrbuf, sizeof(addrbuf), NULL, 0,
+			NI_NUMERICHOST))
+	  strcpy(addrbuf, "???");
+	if (-1 == (s = socket(res->ai_family, res->ai_socktype, res->ai_protocol)))
+	  {
+	    perror("socket");
+	    continue;
+	  }
+	if (TCP_Verbose_Reporting) fprintf (stderr, "trying %s\n", addrbuf);
+	not_connected = connect (s, res->ai_addr, res->ai_addrlen);
+	if (not_connected == -1)
+	  {
+#ifdef EINTR
+	if (errno == EINTR) /* If interrupted, try again. */
+	  {
+	    if (0 == sys_call_interrupted_hook ())
+	    continue;
+	  }
+#endif
+	fprintf (stderr, "connection to %s, port %s:",
+		 (char *) addrbuf, servbuf);
+	perror ("");
+	  }
+	if (!not_connected)
+	  break;
+     }
+   freeaddrinfo(res0);
+#else	/* INET6 / !INET6 */
    if (-1 == (s = socket (h_addr_type, SOCK_STREAM, 0)))
      {
 	perror("socket");
 	return -1;
      }
-	
-   not_connected = -1;
    
    while (not_connected 
 	  && (h_addr_list != NULL) 
@@ -265,6 +316,7 @@
 	  }
 	h_addr_list++;
      }
+#endif	/* !INET6 */
    
    if (not_connected) 
      {
--- slrn-0.9.7.4/src/nntplib.c.orig	Wed Mar 13 14:03:31 2002
+++ slrn-0.9.7.4/src/nntplib.c	Tue May 28 20:33:42 2002
@@ -31,6 +31,9 @@
 # include <unistd.h>
 #endif
 
+#include <netdb.h>
+#include <netinet/in.h>
+
 #include <stdarg.h>
 #include <slang.h>
 #include "jdmacros.h"
@@ -587,6 +590,9 @@
    char *a, *b, *bmax;
    int def_port = 119;
    char *def_service = "nntp";
+#ifdef INET6
+   int quoteaddr=0;
+#endif
 
    a = host;
    if (0 == strncmp (a, "snews://", 8))
@@ -602,8 +608,24 @@
 
    b = s->host;
    bmax = b + NNTP_MAX_HOST_LEN;
+#ifdef INET6
+   while ((*a !=0) && ((*a != ':') || quoteaddr) && (b < bmax))
+      if(*a == '[')
+        {
+	   quoteaddr=1;
+	   a++;
+	}
+      else if(*a == ']')
+        {
+	   quoteaddr=0;
+	   a++;
+	}
+      else
+	 *b++ = *a++;
+#else
    while ((*a != 0) && (*a != ':') && (b < bmax))
      *b++ = *a++;
+#endif
    *b = 0;
    slrn_strncpy (s->name, host, NNTP_MAX_HOST_LEN);
 
@@ -615,8 +637,14 @@
 
    if (port <= 0)
      {
+	struct servent *se;
+
 	if (*a == ':')
-	  port = atoi (a + 1);
+	  {
+	     if (!(port = atoi (a + 1)))
+		if ((se=getservbyname(a + 1, "tcp")) != NULL)
+		   port = ntohs (se->s_port);
+	  }
 	else if (-1 == (port = sltcp_map_service_to_port (def_service)))
 	  port = def_port;
      }
